# 工厂方法模式

### 介绍
工厂方法模式应用于创建对象，是简单工厂模式的进一步抽象和贵广。克服了简单模式的弊端（简单模式中，添加类的时候往往需要修改工厂类，这就违反了
开闭原则。），同时又保持了封装对象创建过程的优点。工厂方法使一个类的实例化延迟到其子类。

### 应用场景
简单工厂模式用支付场景做的示例，工厂方法模式同样用支付做示例，便于对比二者的异同。  
在简单工厂模式示例中，如果再增加一个银行支付，必然要修改支付工厂，这就违反了开闭原则。简单工厂中包含了必要的逻辑判断，根据调用者的条件进行
对象的创建。既然简单工厂类与创建对象的分支条件耦合，那么根据依赖倒置原则，我们就可以将简单工厂类抽象为一个接口，包含创建对象的方法。然后具
体生产对象的工厂类去实现工厂接口。如此一来，简单工厂模式的工厂类，变成了一个工厂接口和多个具体生产对象的实现类的工厂。  

对比简单工厂模式与工厂方法模式的示例代码，不难发现：工厂方法模式把简单工厂的逻辑判断转移到了客户端。当新增功能时，不再去改工厂类，而是修改
客户端。如果是简单工厂模式，客户端N次调用简单工厂，就会有N次调用工厂的重复代码。但是在工厂方法模式中，由于对象的创建延迟到了其子类，所以客
户端只要调用一次具体生产对象的工厂，就可以N次创建对象。具体可以参考测试示例 `TestMultiCall`。